<section class="home-container">
  <h1>üé¨ Cat√°logo de Filmes</h1>
  <p>Explore filmes, filtre por g√™nero, marque favoritos e leia avalia√ß√µes de outros usu√°rios.</p>

  <div #movieCarousel id="movieCarousel" class="carousel slide">
    <div class="carousel-inner">
      <div
        *ngFor="let filme of filmesData; let i = index"
        class="carousel-item"
        [class.active]="i === 0"
      >
        <a (click)="navigateToMovie(filme.id)">
          <img
            [src]="filme.imagemUrl"
            [alt]="filme.titulo"
            class="d-block"
          />
        </a>
      </div>
    </div>
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#movieCarousel"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#movieCarousel"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Pr√≥ximo</span>
    </button>
  </div>

  <div class="search-filter">
    <input
      type="text"
      placeholder="Buscar por t√≠tulo..."
      [value]="searchTerm"
      (input)="onSearchInput($event)"
    />
    <select
      [(ngModel)]="selectedGenero"
      (change)="onGeneroChange($event)"
    >
      <option value="">Todos os G√™neros</option>
      <option *ngFor="let g of generos" [value]="g">{{ g }}</option>
    </select>
  </div>

  <div *ngIf="filmes$ | async as filmes">
    <div class="movies-grid">
      <a
        *ngFor="let f of filmes; trackBy: trackById"
        (click)="navigateToMovie(f.id)"
        class="movie-card"
      >
        <img [src]="f.imagemUrl" [alt]="f.titulo" class="movie-image" />
        <div class="movie-info">
          <h2>{{ f.titulo }}</h2>
          <p><strong>G√™nero:</strong> {{ f.genero }}</p>
          <p><strong>Ano:</strong> {{ f.anoLancamento }}</p>
          <p><strong>Nota:</strong> {{ f.notaMedia.toFixed(1) }} ‚≠ê</p>
        </div>
      </a>
    </div>

    <div *ngIf="!filmes.length" class="sem-filmes">
      Nenhum filme encontrado.
    </div>

    <div class="pagination">
      <button (click)="prevPage()" [disabled]="currentPage === 1">Anterior</button>
      <span>P√°gina {{ currentPage }}</span>
      <button (click)="nextPage()" [disabled]="filmes.length < itemsPerPage">Pr√≥xima</button>
    </div>
  </div>
</section>
